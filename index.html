<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Maryam</title>
    <style>
        :root {
            /* LIGHT THEME (Base) */
            --bg-color: #ffe082;
            --stripe-1: #ffecb3;
            --stripe-2: #fff9c4;
            --text-color: #000;
            --box-bg: #fff;
            --box-border: #000;
            --accent: #ff4081;
        }

        body.dark-mode {
            /* DARK THEME (Glitch State) */
            --bg-color: #0d1117;
            --stripe-1: #161b22;
            --stripe-2: #0d1117;
            --text-color: #e6edf3;
            --box-bg: #000;
            --box-border: #fff;
            --accent: #00e676; /* Green accent in dark mode */
        }

        /* --- CORE STYLES --- */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Verdana', sans-serif;
            background-color: var(--bg-color);
            /* THE TEXTURE (Stripes) */
            background-image: repeating-linear-gradient(
                45deg,
                var(--stripe-1) 0,
                var(--stripe-1) 20px,
                var(--stripe-2) 20px,
                var(--stripe-2) 40px
            );
            color: var(--text-color);
            overflow-x: hidden;
            min-height: 100vh;
            transition: background 0.1s, color 0.1s; /* Instant snap for glitch feel */
        }

        /* --- ENVELOPE OPENER (Pink) --- */
        #opener-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #ffc1e3;
            background-image: repeating-linear-gradient(45deg, #ffc1e3 0, #ffc1e3 20px, #ffd1ea 20px, #ffd1ea 40px);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 2000; transition: transform 5.0s ease-in-out, opacity 3.8s;
        }
        .envelope {
            width: 150px; height: 100px; background: #fff; position: relative; border: 4px solid #000;
            cursor: pointer; box-shadow: 8px 8px 0px #000; transition: transform 0.5s;
        }
        .envelope:hover { transform: scale(1.1) rotate(-3deg); }
        .envelope::after {
            content: ''; position: absolute; top: 0; left: 0; width: 0; height: 0; 
            border-left: 71px solid transparent; border-right: 71px solid transparent; border-top: 50px solid #000;
        }
        .envelope-text {
            margin-top: 30px; font-family: 'Courier New', monospace; font-weight: bold; background: #fff; color: #000;
            padding: 5px 10px; border: 2px solid #000; box-shadow: 4px 4px 0 #000;
        }

        /* --- MAIN CONTENT --- */
        #main-content {
            display: none; opacity: 0; transform: scale(0.9); transition: all 1.5s ease-out;
            max-width: 600px; margin: 40px auto; text-align: center; padding: 20px; position: relative; z-index: 10;
        }

        /* --- GLITCH NAME --- */
        .glitch-wrapper {
            font-size: 3.5rem; font-weight: 900; margin: 30px 0; font-family: 'Courier New', monospace;
            text-transform: uppercase; letter-spacing: -3px; position: relative; display: inline-block;
            text-shadow: 4px 4px 0px var(--accent);
        }

        /* --- CONTENT BOXES --- */
        .speech-bubble {
            background: var(--box-bg); border: 3px solid var(--box-border); padding: 20px;
            border-radius: 15px; box-shadow: 6px 6px 0px var(--box-border);
            display: inline-block; margin-bottom: 20px; transform: rotate(-1deg); position: relative; z-index: 2;
        }
        .decor-block {
            width: 40px; height: 15px; background: var(--accent); border: 3px solid var(--box-border);
            position: absolute; bottom: -12px; left: 50%; transform: translateX(-50%);
        }

        p.desc {
            font-family: 'Courier New', monospace; font-size: 1.1rem; line-height: 1.5;
            background: var(--box-bg); padding: 15px; border: 2px dashed var(--box-border);
            transform: rotate(1deg); margin-top: 20px;
        }

        /* --- FLOATERS --- */
        .floater {
            position: absolute; font-size: 2.5rem; z-index: 100;
            animation: floatAnim 4s ease-in-out infinite;
            filter: drop-shadow(3px 3px 0px rgba(0,0,0,0.2));
        }
        .p1 { top: 10%; left: 0%; animation-delay: 0s; }
        .p2 { top: 20%; right: 5%; animation-delay: 1.5s; }
        .p3 { bottom: 15%; left: -5%; animation-delay: 0.5s; }
        .p4 { bottom: 30%; right: -5%; animation-delay: 2s; }
        .h1 { top: 50%; left: 10%; font-size: 1.5rem; animation-delay: 1s; }

        @keyframes floatAnim {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(8deg); }
        }

        /* --- BUTTONS --- */
        .btn {
            background: transparent; border: none; font-family: 'Courier New', monospace;
            font-weight: bold; font-size: 1.2rem; cursor: pointer; color: var(--text-color);
            border-bottom: 4px solid var(--accent); margin-top: 20px; transition: 0.2s;
        }
        .btn:hover { background: var(--accent); color: var(--bg-color); border-bottom: 4px solid var(--text-color); transform: scale(1.1); }

        .card {
            background: var(--box-bg); border: 3px solid var(--box-border); padding: 15px;
            margin-top: 50px; box-shadow: 6px 6px 0px var(--box-border); transform: rotate(-1deg);
        }

        @media (max-width: 600px) { .glitch-wrapper { font-size: 2.8rem; } }
    </style>
</head>
<body>
<audio id="bg-music" loop>
    <source src="Piano.mp3" type="audio/mpeg">
</audio>
    <div id="opener-container" onclick="openApology()">
        <div class="envelope"></div>
        <div class="envelope-text">For Maryam ðŸ’Œ</div>
    </div>

    <div id="main-content">
        
        <div class="floater p1">ðŸ‘¾</div>
        <div class="floater p2">ðŸŽ€</div>
        <div class="floater p3">ðŸ‘‘</div>
        <div class="floater p4">ðŸŒ¹</div>
        <div class="floater h1">ðŸ’–</div>

        <div class="speech-bubble">
            <h2>Welcome to the SORRY ZONE! <br> Nothing here makes sense (except my apology).</h2>
            <div class="decor-block"></div>
        </div>

        <p style="font-family: 'Courier New'; font-weight: bold; margin-bottom: -20px;">Hi...</p>

        <div class="glitch-wrapper" id="name-display">M@RY#M</div>

        <p class="desc">
            No straight lines. No fake excuses. Just chaos by design.
            <br>
            <strong>I M3SS3D UP.</strong>
            <br>
            Experiments, mistakes, and occasional breakthroughs. This is not a traditional apology...
        </p>

        <button class="btn" onclick="alert('Coffee/Chai date locked! â˜•')">&lt; Read more &gt;</button>

        <div class="card">
            <h3 style="color: var(--accent); border-bottom: 3px solid var(--accent); display:inline-block;">Project: Peace Offering â˜•</h3>
            <p>A community-driven request for you to grab coffee with me so I can fix this bug in our friendship.</p>
        </div>

    </div>

    <script>
        // 1. OPENER
        function openApology() {
            const opener = document.getElementById('opener-container');
            const content = document.getElementById('main-content');
            
            opener.style.transform = "scale(5) rotate(10deg)";
            opener.style.opacity = "0";

            setTimeout(() => {
                opener.style.display = "none";
                content.style.display = "block";
                setTimeout(() => {
                    content.style.opacity = "1";
                    content.style.transform = "scale(1)";
                    startNameScramble(); // Start Name Animation
                    startBackgroundGlitch(); // Start Background Flashing
                }, 50);
            }, 500);
        }
const music = document.getElementById("bg-music");
music.volume = 0.35;
music.play();
        // 2. NAME SCRAMBLE
        const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ@#$%&!";
        const targetName = "MARYAM";
        function startNameScramble() {
            let iteration = 0;
            const element = document.getElementById("name-display");
            let interval = setInterval(() => {
                element.innerText = element.innerText
                .split("")
                .map((letter, index) => {
                    if(index < iteration) return targetName[index];
                    return letters[Math.floor(Math.random() * letters.length)];
                })
                .join("");
                
                if(iteration >= targetName.length){ 
                    clearInterval(interval);
                    element.innerText = targetName;
                }
                iteration += 1/3;
            }, 50);
        }

        // 3. BACKGROUND GLITCH (THE FLICKER EFFECT)
        function startBackgroundGlitch() {
            // Function to toggle dark mode randomly
            function triggerGlitch() {
                const body = document.body;
                
                // Add dark mode (Invert colors)
                body.classList.add('dark-mode');

                // Remove it quickly (50ms to 200ms duration)
                setTimeout(() => {
                    body.classList.remove('dark-mode');
                }, Math.random() * 150 + 50);

                // Schedule next glitch (randomly between 2s and 6s)
                setTimeout(triggerGlitch, Math.random() * 4000 + 2000);
            }

            // Start the loop
            setTimeout(triggerGlitch, 1000);
        }
    </script>

</body>
</html>
